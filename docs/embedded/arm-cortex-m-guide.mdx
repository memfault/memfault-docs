---
id: arm-cortex-m-guide
title: ARM Cortex-M Integration Guide
sidebar_label: ARM Cortex-M
---

import TryFlow from "./_steps/try-flow.mdx";
import CloneSdk from "./_steps/clone-sdk.mdx";
import AddSources from "./_steps/add-sources.mdx";
import CorePlatformDependencies from "./_steps/core-platform-dependencies.mdx";
import AddBuildId from "./_steps/add-build-id.mdx";
import LoggingDependency from "./_steps/logging-dependency.mdx";
import RtosPorts from "./_steps/rtos-ports.mdx";
import CoredumpDependency from "./_steps/coredump-dependency.mdx";
import RegisterAssert from "./_steps/register-assert.mdx";
import CreateProjectKey from "./_steps/create-project-key.mdx";
import UploadSymbolFile from "./_steps/upload-symbol-file.mdx";
import DataTransferTroubleshooting from "./_steps/data-transfer-troubleshooting.mdx";
import PostChunksLocally from "./_steps/post-chunks-locally.mdx";
import PublishDataToCloud from "./_steps/publish-data-to-cloud.mdx";
import DefineFirstTraceEvent from "./_steps/define-first-trace-event.mdx";
import DefineFirstHeartbeat from "./_steps/define-first-heartbeat.mdx";
import AddCliTestCommands from "./_steps/add-cli-test-commands.mdx";
import FwSdkFeatures from "./_steps/sdk-features.mdx";
import MetricTimerDependency from "./_steps/metric-timer-dependency.mdx";
import RebootTrackingDependency from "./_steps/reboot-tracking-dependency.mdx";

## Overview

The following guide will walk you through step-by-step how to integrate and test
the Memfault SDK for a Cortex-M device using the GNU GCC, Clang, IAR, ARM MDK,
or TI ARM Compiler.

<FwSdkFeatures />

## Pre-Integration

### (Optionally) Collect a coredump capture using GDB

<TryFlow />

## Integration Steps

### Prepare folder for memfault-firmware-sdk & port

<CloneSdk />

### Add Sources to Build System

<AddSources />

### Core Dependencies

<CorePlatformDependencies />

### Reboot Tracking Dependencies

<RebootTrackingDependency />

### Logging Dependency

<LoggingDependency />

### Timer Dependencies

<MetricTimerDependency />

### RTOS Port Files

<RtosPorts />

### Register Assert Handler

<RegisterAssert />

### Implement Coredump Storage Dependency

<CoredumpDependency />

### Add a Unique Identifier to target

<AddBuildId />

### Confirm Integration Links

At this point your project should compile and be able to boot. On startup you
should see some messaging like the following print when
`memfault_platform_boot()` is called:

```
[I] Memfault Build ID: cefaeb9407ab0dac7a5efe9fd510618ee21e9df7
[I] S/N: MFLT0123
[I] SW type: app-fw
[I] SW version: 1.0.0+cefaeb940
[I] HW version: dvt1
[I] Reset Reason, RESETREAS=0x4
[I] Reset Causes:
[I]  Software
[I] Memfault Initialized!
```

## Verification & Tuning Steps

With Memfault compiling into your build, it's now time to add some initial
instrumentation, and test the integration!

### Define First Trace Event

<DefineFirstTraceEvent />

### Define First Heartbeat

<DefineFirstHeartbeat />

### Add Test Commands to CLI

<AddCliTestCommands />

### Post Data to Cloud via Local Debug Setup

<PostChunksLocally />

### Upload Symbol File

<UploadSymbolFile />

### Troubleshooting Data Transfer

<DataTransferTroubleshooting />

## Data Transport Steps

With data collection verified locally, the final step is to push data
automatically to the Memfault cloud for analysis.

### Post Data to Cloud via Device Transport

<PublishDataToCloud />
